function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx;a=window;b=a.App=a.App||{};c=b.Web=b.Web||{};d=c.Code=c.Code||{};e=a.StartupCode$App_Web$Client=a.StartupCode$App_Web$Client||{};f=d.Task=d.Task||{};g=a.WebSharper=a.WebSharper||{};h=g.List=g.List||{};i=g.UI=g.UI||{};j=i.Next=i.Next||{};k=j.Var=j.Var||{};l=j.ListModel=j.ListModel||{};m=g.Operators=g.Operators||{};n=h.T=h.T||{};o=g.Arrays=g.Arrays||{};p=g.Obj=g.Obj||{};q=j.AttrModule=j.AttrModule||{};r=a.App$Web_Templates=a.App$Web_Templates||{};s=j.Snap=j.Snap||{};t=j.Abbrev=j.Abbrev||{};u=t.Fresh=t.Fresh||{};v=j.Storage=j.Storage||{};w=g.Seq=g.Seq||{};x=g.Unchecked=g.Unchecked||{};y=g.JavaScript=g.JavaScript||{};z=y.Pervasives=y.Pervasives||{};A=j.Attrs=j.Attrs||{};B=j.DomUtility=j.DomUtility||{};C=j.Doc=j.Doc||{};D=g.Numeric=g.Numeric||{};E=v.ArrayStorage=v.ArrayStorage||{};F=g.Collections=g.Collections||{};G=F.Dictionary=F.Dictionary||{};H=y.JSModule=y.JSModule||{};I=j.AttrProxy=j.AttrProxy||{};J=j.DynamicAttrNode=j.DynamicAttrNode||{};K=j.View=j.View||{};L=a.StartupCode$WebSharper_UI_Next$Abbrev=a.StartupCode$WebSharper_UI_Next$Abbrev||{};M=g.Enumerator=g.Enumerator||{};N=j.Docs=j.Docs||{};O=a.StartupCode$WebSharper_UI_Next$DomUtility=a.StartupCode$WebSharper_UI_Next$DomUtility||{};P=t.Mailbox=t.Mailbox||{};Q=F.HashSet=F.HashSet||{};R=M.T=M.T||{};S=a.StartupCode$WebSharper_UI_Next$Doc_Client=a.StartupCode$WebSharper_UI_Next$Doc_Client||{};T=g.Slice=g.Slice||{};U=g.Strings=g.Strings||{};V=j.DocElemNode=j.DocElemNode||{};W=j.Array=j.Array||{};X=j.Client=j.Client||{};Y=X.Docs=X.Docs||{};Z=Y.RunState=Y.RunState||{};_0=Y.NodeSet=Y.NodeSet||{};_1=j.An=j.An||{};_2=F.DictionaryUtil=F.DictionaryUtil||{};_3=j.CheckedInput=j.CheckedInput||{};_4=j.Elt=j.Elt||{};_5=X.Attrs=X.Attrs||{};_6=_5.Dyn=_5.Dyn||{};_7=g.Concurrency=g.Concurrency||{};_8=j.Anims=j.Anims||{};_9=j.AppendList=j.AppendList||{};_=j.String=j.String||{};$=j.Updates=j.Updates||{};ba=a.StartupCode$WebSharper_UI_Next$Attr_Client=a.StartupCode$WebSharper_UI_Next$Attr_Client||{};bb=_7.AsyncBody=_7.AsyncBody||{};bc=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bd=_7.CT=_7.CT||{};be=a.StartupCode$WebSharper_UI_Next$Animation=a.StartupCode$WebSharper_UI_Next$Animation||{};bf=t.HashSet=t.HashSet||{};bg=g.Char=g.Char||{};bh=_7.Scheduler=_7.Scheduler||{};bi=g.CancellationTokenSource=g.CancellationTokenSource||{};bj=j.Easing=j.Easing||{};bk=F.HashSetUtil=F.HashSetUtil||{};bl=g.Queue=g.Queue||{};bm=g.OperationCanceledException=g.OperationCanceledException||{};bn=a.StartupCode$WebSharper_UI_Next$AppendList=a.StartupCode$WebSharper_UI_Next$AppendList||{};bo=g.Lazy=g.Lazy||{};bp=Y.DomNodes=Y.DomNodes||{};bq=g.LazyExtensionsProxy=g.LazyExtensionsProxy||{};br=bq.LazyRecord=bq.LazyRecord||{};bs=a.console;bt=a.IntelliFactory;bu=bt&&bt.Runtime;bv=a.jQuery;bw=a.Node;bx=a.Date;d.Main=function(){e.$cctor();return e.Main;};d.Tasks=function(){e.$cctor();return e.Tasks;};d.NewTaskName=function(){e.$cctor();return e.NewTaskName;};e.$cctor=function(){var by;e.$cctor=a.ignore;function bz(){d.Tasks().RemoveBy(function(bB){return bB.Done.c;});}function bA(){d.Tasks().Append(f.New(d.NewTaskName().c,k.Create$1(false)));k.Set(d.NewTaskName(),"");}e.Tasks=l.Create(function(bB){return bB.Name;},h.ofArray([f.New("Apprendre le F#",k.Create$1(true)),f.New("Finir le bot en Xamarin Forms",k.Create$1(false))]));e.NewTaskName=k.Create$1("");e.Main=C.RunById("tasks",r.main(new n({$:1,$0:{$:4,$0:"clearcompleted",$1:function(){return function(){return bz();};}},$1:new n({$:1,$0:{$:4,$0:"add",$1:function(){return function(){return bA();};}},$1:(by=new n({$:1,$0:{$:0,$0:"listcontainer",$1:C.Convert(function(bB){var bC;function bD(){d.Tasks().RemoveByKey(bB.Name);}return r.listitem((bC=new n({$:1,$0:{$:7,$0:"done",$1:bB.Done},$1:new n({$:1,$0:{$:4,$0:"clear",$1:function(){return function(){return bD();};}},$1:new n({$:1,$0:{$:1,$0:"task",$1:bB.Name},$1:n.Empty})})}),new n({$:1,$0:{$:3,$0:"showdone",$1:q.DynamicClass("checked",bB.Done.v,a.id)},$1:bC})));},d.Tasks().v)},$1:n.Empty}),new n({$:1,$0:{$:6,$0:"newtaskname",$1:d.NewTaskName()},$1:by}))})})));};f.New=function(by,bz){return{Name:by,Done:bz};};h.ofArray=function(by){var bz,bA,bB;bz=n.Empty;for(bA=o.length(by)-1,bB=0;bA>=bB;bA--)bz=new n({$:1,$0:o.get(by,bA),$1:bz});return bz;};h.head=function(by){return by.$==1?by.$0:h.listEmpty();};h.tail=function(by){return by.$==1?by.$1:h.listEmpty();};h.listEmpty=function(){return m.FailWith("The input list was empty.");};k.Create$1=function(by){var bz;bz=null;bz=k.New(false,by,s.New({$:2,$0:by,$1:[]}),u.Int(),function(){return bz.s;});return bz;};k.Set=function(by,bz){if(by.o)(function(bA){return bA("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bA){bs.log(bA);}));else{s.Obsolete(by.s);by.c=bz;by.s=s.New({$:2,$0:bz,$1:[]});}};l.Create=function(by,bz){return l.CreateWithStorage(by,v.InMemory(o.ofSeq(bz)));};l.CreateWithStorage=function(by,bz){return new l.New(by,bz);};m.FailWith=function(by){throw a.Error(by);};m.KeyValue=function(by){return[by.K,by.V];};n=h.T=bu.Class({GetEnumerator:function(){return new R.New(this,null,function(by){var bz;bz=by.s;return bz.$==0?false:(by.c=bz.$0,by.s=bz.$1,true);},void 0);},GetEnumerator0:function(){return M.Get(this);}},null,n);n.Empty=new n({$:0});o.get=function(by,bz){o.checkBounds(by,bz);return by[bz];};o.length=function(by){return by.dims===2?by.length*by.length:by.length;};o.checkBounds=function(by,bz){if(bz<0||bz>=by.length)m.FailWith("Index was outside the bounds of the array.");};o.set=function(by,bz,bA){o.checkBounds(by,bz);by[bz]=bA;};p=g.Obj=bu.Class({Equals:function(by){return this===by;},GetHashCode:function(){return -1;}},null,p);l=j.ListModel=bu.Class({RemoveByKey:function(by){var bz;bz=this;this["var"].set_RVal(this.storage.SRemoveIf(function(bA){return x.Equals(bz.key(bA),by);},this["var"].RVal()));this.ObsoleteKey(by);},RemoveBy:function(by){var bz,bA,bB,bC;bz=this["var"].RVal();for(bA=0,bB=bz.length-1;bA<=bB;bA++){bC=o.get(bz,bA);by(bC)?this.ObsoleteKey(this.key(bC)):void 0;}this["var"].set_RVal(this.storage.SRemoveIf(by,this["var"].RVal()));},ObsoleteKey:function(by){var bz,bA;bz=(bA=null,[this.it.TryGetValue(by,{get:function(){return bA;},set:function(bB){bA=bB;}}),bA]);bz[0]?(s.Obsolete(bz[1]),this.it.Remove(by)):void 0;},Append:function(by){var bz,bA,bB,bC;bz=this;bA=this["var"].RVal();bB=this.key(by);bC=o.tryFindIndex(function(bD){return x.Equals(bz.key(bD),bB);},bA);bC!=null&&bC.$==1?this["var"].set_RVal(this.storage.SSetAt(bC.$0,by,bA)):this["var"].set_RVal(this.storage.SAppend(by,bA));this.ObsoleteKey(bB);},GetEnumerator:function(){return M.Get(this["var"].RVal());},GetEnumerator0:function(){return M.Get0(this["var"].RVal());}},p,l);l.New=bu.Ctor(function(by,bz){l.New$3.call(this,by,k.Create$1(o.ofSeq(w.distinctBy(by,bz.SInit()))),bz);},l);l.New$3=bu.Ctor(function(by,bz,bA){this.key=by;this["var"]=bz;this.storage=bA;this.v=K.Map(function(bB){return bB.slice();},this["var"].RView());this.it=new G.New$5();},l);q.DynamicClass=function(by,bz,bA){return A.Dynamic(bz,function(bB){return function(bC){return bA(bC)?B.AddClass(bB,by):B.RemoveClass(bB,by);};});};q.Handler=function(by,bz){return A.Static(function(bA){bA.addEventListener(by,function(bB){return(bz(bA))(bB);},false);});};q.OnAfterRender=function(by){return new I({$:4,$0:by});};q.Value=function(by){function bz(bA){return{$:1,$0:bA};}return q.CustomValue(by,a.id,function(bA){return bz(a.id(bA));});};q.Checked=function(by){function bz(bA,bB){return!x.Equals(by.RVal(),bA.checked)?by.set_RVal(bA.checked):null;}return I.Concat([q.DynamicProp("checked",by.RView()),q.Handler("change",function(bA){return function(bB){return bz(bA,bB);};}),q.Handler("click",function(bA){return function(bB){return bz(bA,bB);};})]);};q.IntValue=function(by){return q.CustomVar(by,function(bz,bA){var bB;bB=bA.get_Input();return bz.value!==bB?void(bz.value=bB):null;},function(bz){var bA,bB,bC;bA=bz.value;return{$:1,$0:_.isBlank(bA)?(bz.checkValidity?bz.checkValidity():true)?new _3({$:2,$0:bA}):new _3({$:1,$0:bA}):(bB=(bC=0,[D.TryParseInt32(bA,{get:function(){return bC;},set:function(bD){bC=bD;}}),bC]),bB[0]?new _3({$:0,$0:bB[1],$1:bA}):new _3({$:1,$0:bA}))};});};q.IntValueUnchecked=function(by){return q.CustomValue(by,a.String,function(bz){var bA;return _.isBlank(bz)?{$:1,$0:0}:(bA=+bz,bA!==bA>>0?null:{$:1,$0:bA});});};q.FloatValue=function(by){return q.CustomVar(by,function(bz,bA){var bB;bB=bA.get_Input();return bz.value!==bB?void(bz.value=bB):null;},function(bz){var bA,bB;bA=bz.value;return{$:1,$0:_.isBlank(bA)?(bz.checkValidity?bz.checkValidity():true)?new _3({$:2,$0:bA}):new _3({$:1,$0:bA}):(bB=+bA,a.isNaN(bB)?new _3({$:1,$0:bA}):new _3({$:0,$0:bB,$1:bA}))};});};q.FloatValueUnchecked=function(by){return q.CustomValue(by,a.String,function(bz){var bA;return _.isBlank(bz)?{$:1,$0:0}:(bA=+bz,a.isNaN(bA)?null:{$:1,$0:bA});});};q.Dynamic=function(by,bz){return A.Dynamic(bz,function(bA){return function(bB){return B.SetAttr(bA,by,bB);};});};q.CustomValue=function(by,bz,bA){return q.CustomVar(by,function(bB,bC){bB.value=bz(bC);},function(bB){return bA(bB.value);});};q.DynamicProp=function(by,bz){return A.Dynamic(bz,function(bA){return function(bB){bA[by]=bB;};});};q.CustomVar=function(by,bz,bA){function bB(bD,bE){return by.RUpdM(function(bF){var bG,bH;bG=bA(bD);return bG!=null&&bG.$==1&&(!x.Equals(bG.$0,bF)&&(bH=[bG,bG.$0],true))?bH[0]:null;});}function bC(bD,bE){var bF,bG;bF=bA(bD);return bF!=null&&bF.$==1&&(x.Equals(bF.$0,bE)&&(bG=bF.$0,true))?null:bz(bD,bE);}return I.Concat([q.Handler("change",function(bD){return function(bE){return bB(bD,bE);};}),q.Handler("input",function(bD){return function(bE){return bB(bD,bE);};}),q.Handler("keypress",function(bD){return function(bE){return bB(bD,bE);};}),q.DynamicCustom(function(bD){return function(bE){return bC(bD,bE);};},by.RView())]);};q.DynamicCustom=function(by,bz){return A.Dynamic(bz,by);};k=j.Var=bu.Class({set_RVal:function(by){k.Set(this,by);},RVal:function(){return this.c;},RView:function(){return this.v;},RUpdM:function(by){var bz;bz=by(this.c);bz!=null&&bz.$==1?k.Set(this,bz.$0):void 0;}},null,k);k.New=function(by,bz,bA,bB,bC){return new k({o:by,c:bz,s:bA,i:bB,v:bC});};r.listitem=function(by){return by?C.GetOrLoadTemplate("index",{$:1,$0:"listitem"},function(){return bv.parseHTML("<li>\r\n                    <div class=\"checkbox\">\r\n                        <label ws-attr=\"ShowDone\">\r\n                            <input type=\"checkbox\" ws-var=\"Done\">\r\n                            ${Task}\r\n                            <button class=\"btn btn-danger btn-xs pull-right\" type=\"button\" ws-onclick=\"Clear\">X</button>\r\n                        </label>\r\n                    </div>\r\n                </li>");},by):C.PrepareTemplate("index",{$:1,$0:"listitem"},function(){return bv.parseHTML("<li>\r\n                    <div class=\"checkbox\">\r\n                        <label ws-attr=\"ShowDone\">\r\n                            <input type=\"checkbox\" ws-var=\"Done\">\r\n                            ${Task}\r\n                            <button class=\"btn btn-danger btn-xs pull-right\" type=\"button\" ws-onclick=\"Clear\">X</button>\r\n                        </label>\r\n                    </div>\r\n                </li>");});};r.main=function(by){return by?C.GetOrLoadTemplate("index",{$:1,$0:"main"},function(){return bv.parseHTML("\r\n            <ul class=\"list-unstyled\" ws-hole=\"ListContainer\">\r\n                <li ws-template=\"ListItem\">\r\n                    <div class=\"checkbox\">\r\n                        <label ws-attr=\"ShowDone\">\r\n                            <input type=\"checkbox\" ws-var=\"Done\">\r\n                            ${Task}\r\n                            <button class=\"btn btn-danger btn-xs pull-right\" type=\"button\" ws-onclick=\"Clear\">X</button>\r\n                        </label>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <form onsubmit=\"return false\">\r\n                <div class=\"form-group\">\r\n                    <label>New task</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control\" ws-var=\"NewTaskName\">\r\n                        <span class=\"input-group-btn\">\r\n                            <button class=\"btn btn-primary\" type=\"button\" ws-onclick=\"Add\">Add</button>\r\n                        </span>\r\n                    </div>\r\n                    <p class=\"help-block\">You are going to add: ${NewTaskName}<span></span></p>\r\n                </div>\r\n                <button class=\"btn btn-default\" type=\"button\" ws-onclick=\"ClearCompleted\">Clear selected tasks</button>\r\n            </form>\r\n        ");},by):C.PrepareTemplate("index",{$:1,$0:"main"},function(){return bv.parseHTML("\r\n            <ul class=\"list-unstyled\" ws-hole=\"ListContainer\">\r\n                <li ws-template=\"ListItem\">\r\n                    <div class=\"checkbox\">\r\n                        <label ws-attr=\"ShowDone\">\r\n                            <input type=\"checkbox\" ws-var=\"Done\">\r\n                            ${Task}\r\n                            <button class=\"btn btn-danger btn-xs pull-right\" type=\"button\" ws-onclick=\"Clear\">X</button>\r\n                        </label>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <form onsubmit=\"return false\">\r\n                <div class=\"form-group\">\r\n                    <label>New task</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control\" ws-var=\"NewTaskName\">\r\n                        <span class=\"input-group-btn\">\r\n                            <button class=\"btn btn-primary\" type=\"button\" ws-onclick=\"Add\">Add</button>\r\n                        </span>\r\n                    </div>\r\n                    <p class=\"help-block\">You are going to add: ${NewTaskName}<span></span></p>\r\n                </div>\r\n                <button class=\"btn btn-default\" type=\"button\" ws-onclick=\"ClearCompleted\">Clear selected tasks</button>\r\n            </form>\r\n        ");});};s.Map=function(by,bz){var bA,bB;bA=bz.s;return bA!=null&&bA.$==0?s.New({$:0,$0:by(bA.$0)}):(bB=s.New({$:3,$0:[],$1:[]}),(s.When(bz,function(bC){s.MarkDone(bB,bz,by(bC));},bB),bB));};s.WhenRun=function(by,bz,bA){var bB;bB=by.s;bB==null?bA():bB!=null&&bB.$==2?(bB.$1.push(bA),bz(bB.$0)):bB!=null&&bB.$==3?(bB.$0.push(bz),bB.$1.push(bA)):bz(bB.$0);};s.WhenObsoleteRun=function(by,bz){var bA;bA=by.s;bA==null?bz():bA!=null&&bA.$==2?bA.$1.push(bz):bA!=null&&bA.$==3?bA.$1.push(bz):void 0;};s.When=function(by,bz,bA){var bB;bB=by.s;bB==null?s.Obsolete(bA):bB!=null&&bB.$==2?(s.EnqueueSafe(bB.$1,bA),bz(bB.$0)):bB!=null&&bB.$==3?(bB.$0.push(bz),s.EnqueueSafe(bB.$1,bA)):bz(bB.$0);};s.MarkDone=function(by,bz,bA){var bB;if((bB=bz.s,bB!=null&&bB.$==0)&&true)s.MarkForever(by,bA);else s.MarkReady(by,bA);};s.EnqueueSafe=function(by,bz){var bA,bB,bC,bD;by.push(bz);if(by.length%20===0){bA=by.slice(0);bl.Clear(by);for(bB=0,bC=o.length(bA)-1;bB<=bC;bB++){bD=o.get(bA,bB);typeof bD=="object"?function(bE){if(bE.s)by.push(bE);}(bD):function(bE){by.push(bE);}(bD);}}else void 0;};s.MarkForever=function(by,bz){var bA,bB,bC,bD;bA=by.s;if(bA!=null&&bA.$==3){by.s={$:0,$0:bz};bB=bA.$0;for(bC=0,bD=o.length(bB)-1;bC<=bD;bC++)(o.get(bB,bC))(bz);}else void 0;};s.MarkReady=function(by,bz){var bA,bB,bC,bD;bA=by.s;if(bA!=null&&bA.$==3){by.s={$:2,$0:bz,$1:bA.$1};bB=bA.$0;for(bC=0,bD=o.length(bB)-1;bC<=bD;bC++)(o.get(bB,bC))(bz);}else void 0;};s.Map3=function(by,bz,bA,bB){var bC,bD,bE,bF;function bG(bH){var bI,bJ,bK,bL;if(!(bI=bF.s,bI!=null&&bI.$==0||bI!=null&&bI.$==2&&true)){bJ=s.ValueAndForever(bz);bK=s.ValueAndForever(bA);bL=s.ValueAndForever(bB);bJ!=null&&bJ.$==1?bK!=null&&bK.$==1?bL!=null&&bL.$==1?bJ.$0[1]&&bK.$0[1]&&bL.$0[1]?s.MarkForever(bF,by(bJ.$0[0],bK.$0[0],bL.$0[0])):s.MarkReady(bF,by(bJ.$0[0],bK.$0[0],bL.$0[0])):void 0:void 0:void 0;}}bC=bz.s;bD=bA.s;bE=bB.s;return bC!=null&&bC.$==0?bD!=null&&bD.$==0?bE!=null&&bE.$==0?s.New({$:0,$0:by(bC.$0,bD.$0,bE.$0)}):s.Map3Opt1(by,bC.$0,bD.$0,bB):bE!=null&&bE.$==0?s.Map3Opt2(by,bC.$0,bE.$0,bA):s.Map3Opt3(by,bC.$0,bA,bB):bD!=null&&bD.$==0?bE!=null&&bE.$==0?s.Map3Opt4(by,bD.$0,bE.$0,bz):s.Map3Opt5(by,bD.$0,bz,bB):bE!=null&&bE.$==0?s.Map3Opt6(by,bE.$0,bz,bA):(bF=s.New({$:3,$0:[],$1:[]}),(s.When(bz,bG,bF),s.When(bA,bG,bF),s.When(bB,bG,bF),bF));};s.Sequence=function(by){var bz,bA,bB;function bC(bD){var bE;if(bB[0]===0){bE=o.map(function(bF){var bG;bG=bF.s;return bG!=null&&bG.$==0?bG.$0:bG!=null&&bG.$==2?bG.$0:m.FailWith("value not found by View.Sequence");},bz);o.forall(function(bF){var bG;return(bG=bF.s,bG!=null&&bG.$==0)&&true;},bz)?s.MarkForever(bA,bE):s.MarkReady(bA,bE);}else bB[0]--;}bz=o.ofSeq(by);return bz.length==0?s.New({$:0,$0:[]}):(bA=s.New({$:3,$0:[],$1:[]}),(bB=[o.length(bz)-1],(o.iter(function(bD){s.When(bD,bC,bA);},bz),bA)));};s.Map2=function(by,bz,bA){var bB,bC,bD;function bE(bF){var bG,bH,bI;if(!(bG=bD.s,bG!=null&&bG.$==0||bG!=null&&bG.$==2&&true)){bH=s.ValueAndForever(bz);bI=s.ValueAndForever(bA);bH!=null&&bH.$==1?bI!=null&&bI.$==1?bH.$0[1]&&bI.$0[1]?s.MarkForever(bD,by(bH.$0[0],bI.$0[0])):s.MarkReady(bD,by(bH.$0[0],bI.$0[0])):void 0:void 0;}}bB=bz.s;bC=bA.s;return bB!=null&&bB.$==0?bC!=null&&bC.$==0?s.New({$:0,$0:by(bB.$0,bC.$0)}):s.Map2Opt1(by,bB.$0,bA):bC!=null&&bC.$==0?s.Map2Opt2(by,bC.$0,bz):(bD=s.New({$:3,$0:[],$1:[]}),(s.When(bz,bE,bD),s.When(bA,bE,bD),bD));};s.Map2Unit=function(by,bz){var bA,bB,bC;function bD(){var bE,bF,bG;if(!(bE=bC.s,bE!=null&&bE.$==0||bE!=null&&bE.$==2&&true)){bF=s.ValueAndForever(by);bG=s.ValueAndForever(bz);bF!=null&&bF.$==1?bG!=null&&bG.$==1?bF.$0[1]&&bG.$0[1]?s.MarkForever(bC,null):s.MarkReady(bC,null):void 0:void 0;}}bA=by.s;bB=bz.s;return bA!=null&&bA.$==0?bB!=null&&bB.$==0?s.New({$:0,$0:null}):bz:bB!=null&&bB.$==0?by:(bC=s.New({$:3,$0:[],$1:[]}),(s.When(by,bD,bC),s.When(bz,bD,bC),bC));};s.Join=function(by){var bz;bz=s.New({$:3,$0:[],$1:[]});s.When(by,function(bA){var bB;bB=bA();s.When(bB,function(bC){var bD,bE;if((bD=bB.s,bD!=null&&bD.$==0)&&true&&((bE=by.s,bE!=null&&bE.$==0)&&true))s.MarkForever(bz,bC);else s.MarkReady(bz,bC);},bz);},bz);return bz;};s.Map3Opt1=function(by,bz,bA,bB){return s.Map(function(bC){return by(bz,bA,bC);},bB);};s.Map3Opt2=function(by,bz,bA,bB){return s.Map(function(bC){return by(bz,bC,bA);},bB);};s.Map3Opt3=function(by,bz,bA,bB){return s.Map2(function(bC,bD){return by(bz,bC,bD);},bA,bB);};s.Map3Opt4=function(by,bz,bA,bB){return s.Map(function(bC){return by(bC,bz,bA);},bB);};s.Map3Opt5=function(by,bz,bA,bB){return s.Map2(function(bC,bD){return by(bC,bz,bD);},bA,bB);};s.Map3Opt6=function(by,bz,bA,bB){return s.Map2(function(bC,bD){return by(bC,bD,bz);},bA,bB);};s.ValueAndForever=function(by){var bz;bz=by.s;return bz!=null&&bz.$==0?{$:1,$0:[bz.$0,true]}:bz!=null&&bz.$==2?{$:1,$0:[bz.$0,false]}:null;};s.Map2Opt1=function(by,bz,bA){return s.Map(function(bB){return by(bz,bB);},bA);};s.Map2Opt2=function(by,bz,bA){return s.Map(function(bB){return by(bB,bz);},bA);};s.Copy=function(by){var bz,bA,bB;bz=by.s;return bz==null?by:bz!=null&&bz.$==2?(bA=s.New({$:2,$0:bz.$0,$1:[]}),(s.WhenObsolete(by,bA),bA)):bz!=null&&bz.$==3?(bB=s.New({$:3,$0:[],$1:[]}),(s.When(by,function(bC){s.MarkDone(bB,by,bC);},bB),bB)):by;};s.WhenObsolete=function(by,bz){var bA;bA=by.s;bA==null?s.Obsolete(bz):bA!=null&&bA.$==2?s.EnqueueSafe(bA.$1,bz):bA!=null&&bA.$==3?s.EnqueueSafe(bA.$1,bz):void 0;};u.Int=function(){u.set_counter(u.counter()+1);return u.counter();};u.set_counter=function(by){L.$cctor();L.counter=by;};u.counter=function(){L.$cctor();return L.counter;};v.InMemory=function(by){return new E.New(by);};w.distinctBy=function(by,bz){return{GetEnumerator:function(){var bA,bB;bA=M.Get(bz);bB=new Q.New$3();return new R.New(null,null,function(bC){var bD,bE;if(bA.MoveNext()){bD=bA.Current();bE=bB.Add(by(bD));while(!bE&&bA.MoveNext()){bD=bA.Current();bE=bB.Add(by(bD));}return bE&&(bC.c=bD,true);}else return false;},function(){bA.Dispose();});}};};w.fold=function(by,bz,bA){var bB,bC;bB=bz;bC=M.Get(bA);try{while(bC.MoveNext())bB=by(bB,bC.Current());return bB;}finally{if("Dispose"in bC)bC.Dispose();}};w.iter=function(by,bz){var bA;bA=M.Get(bz);try{while(bA.MoveNext())by(bA.Current());}finally{if("Dispose"in bA)bA.Dispose();}};w.map=function(by,bz){return{GetEnumerator:function(){var bA;bA=M.Get(bz);return new R.New(null,null,function(bB){return bA.MoveNext()&&(bB.c=by(bA.Current()),true);},function(){bA.Dispose();});}};};w.max=function(by){var bz,bA,bB;bz=M.Get(by);try{if(!bz.MoveNext())w.seqEmpty();bA=bz.Current();while(bz.MoveNext()){bB=bz.Current();x.Compare(bB,bA)===1?bA=bB:void 0;}return bA;}finally{if("Dispose"in bz)bz.Dispose();}};w.forall=function(by,bz){return!w.exists(function(bA){return!by(bA);},bz);};w.seqEmpty=function(){return m.FailWith("The input sequence was empty.");};w.exists=function(by,bz){var bA,bB;bA=M.Get(bz);try{bB=false;while(!bB&&bA.MoveNext())bB=by(bA.Current());return bB;}finally{if("Dispose"in bA)bA.Dispose();}};x.Equals=function(by,bz){var bA,bB,bC,bD;if(by===bz)return true;else{bA=typeof by;if(bA=="object"){if(by===null||by===void 0||bz===null||bz===void 0)return false;else if("Equals"in by)return by.Equals(bz);else if(by instanceof a.Array&&bz instanceof a.Array)return x.arrayEquals(by,bz);else if(by instanceof a.Date&&bz instanceof a.Date)return x.dateEquals(by,bz);else{bB=[true];for(var bE in by)if(function(bF){bB[0]=!by.hasOwnProperty(bF)||bz.hasOwnProperty(bF)&&x.Equals(by[bF],bz[bF]);return!bB[0];}(bE))break;if(bB[0]){for(var bF in bz)if(function(bG){bB[0]=!bz.hasOwnProperty(bG)||by.hasOwnProperty(bG);return!bB[0];}(bF))break;}return bB[0];}}else return bA=="function"&&("$Func"in by?by.$Func===bz.$Func&&by.$Target===bz.$Target:"$Invokes"in by&&"$Invokes"in bz&&x.arrayEquals(by.$Invokes,bz.$Invokes));}};x.arrayEquals=function(by,bz){var bA,bB;if(o.length(by)===o.length(bz)){bA=true;bB=0;while(bA&&bB<o.length(by)){!x.Equals(o.get(by,bB),o.get(bz,bB))?bA=false:void 0;bB=bB+1;}return bA;}else return false;};x.dateEquals=function(by,bz){return by.getTime()===bz.getTime();};x.Hash=function(by){var bz;bz=typeof by;return bz=="function"?0:bz=="boolean"?by?1:0:bz=="number"?by:bz=="string"?x.hashString(by):bz=="object"?by==null?0:by instanceof a.Array?x.hashArray(by):x.hashObject(by):0;};x.hashString=function(by){var bz,bA,bB;if(by===null)return 0;else{bz=5381;for(bA=0,bB=by.length-1;bA<=bB;bA++)bz=x.hashMix(bz,by[bA].charCodeAt());return bz;}};x.hashArray=function(by){var bz,bA,bB;bz=-34948909;for(bA=0,bB=o.length(by)-1;bA<=bB;bA++)bz=x.hashMix(bz,x.Hash(o.get(by,bA)));return bz;};x.hashObject=function(by){var bz,bA;if("GetHashCode"in by)return by.GetHashCode();else{bz=[0];for(var bB in by)if(function(bC){bz[0]=x.hashMix(x.hashMix(bz[0],x.hashString(bC)),x.Hash(by[bC]));return false;}(bB))break;return bz[0];}};x.hashMix=function(by,bz){return(by<<5)+by+bz;};x.Compare=function(by,bz){var bA,bB,bC,bD,bE,bF;if(by===bz)return 0;else{bB=typeof by;switch(bB=="function"?1:bB=="boolean"?2:bB=="number"?2:bB=="string"?2:bB=="object"?3:0){case 0:return typeof bz=="undefined"?0:-1;break;case 1:return m.FailWith("Cannot compare function values.");break;case 2:return by<bz?-1:1;break;case 3:if(by===null)bC=-1;else if(bz===null)bC=1;else if("CompareTo"in by)bC=by.CompareTo(bz);else if("CompareTo0"in by)bC=by.CompareTo0(bz);else if(by instanceof a.Array&&bz instanceof a.Array)bC=x.compareArrays(by,bz);else if(by instanceof a.Date&&bz instanceof a.Date)bC=x.compareDates(by,bz);else{bD=[0];for(var bG in by)if(function(bH){return!by.hasOwnProperty(bH)?false:!bz.hasOwnProperty(bH)?(bD[0]=1,true):(bD[0]=x.Compare(by[bH],bz[bH]),bD[0]!==0);}(bG))break;if(bD[0]===0){for(var bH in bz)if(function(bI){return!bz.hasOwnProperty(bI)?false:!by.hasOwnProperty(bI)&&(bD[0]=-1,true);}(bH))break;}bC=bD[0];}return bC;break;}}};x.compareArrays=function(by,bz){var bA,bB;if(o.length(by)<o.length(bz))return -1;else if(o.length(by)>o.length(bz))return 1;else{bA=0;bB=0;while(bA===0&&bB<o.length(by)){bA=x.Compare(o.get(by,bB),o.get(bz,bB));bB=bB+1;}return bA;}};x.compareDates=function(by,bz){return x.Compare(by.getTime(),bz.getTime());};z.NewFromSeq=function(by){var bz,bA,bB;bz={};bA=M.Get(by);try{while(bA.MoveNext()){bB=bA.Current();bz[bB[0]]=bB[1];}}finally{if("Dispose"in bA)bA.Dispose();}return bz;};A.Dynamic=function(by,bz){return new I({$:1,$0:new J.New(by,bz)});};A.Insert=function(by,bz){var bA,bB,bC;function bD(bE){if(!(bE===null))if(bE!=null&&bE.$==1)bA.push(bE.$0);else if(bE!=null&&bE.$==2){bD(bE.$0);bD(bE.$1);}else if(bE!=null&&bE.$==3)bE.$0(by);else if(bE!=null&&bE.$==4)bB.push(bE.$0);}bA=[];bB=[];bD(bz);bC=bA.slice(0);return _6.New(by,A.Flags(bz),bC,bB.length===0?null:{$:1,$0:function(bE){w.iter(function(bF){bF(bE);},bB);}});};A.Updates=function(by){return W.MapTreeReduce(function(bz){return bz.NChanged();},K.Const(),K.Map2Unit,by.DynNodes);};A.Empty=function(by){return _6.New(by,0,[],null);};A.EmptyAttr=function(){ba.$cctor();return ba.EmptyAttr;};A.HasChangeAnim=function(by){var bz;bz=4;return(by.DynFlags&bz)===bz;};A.GetChangeAnim=function(by){return A.GetAnim(by,function(bz,bA){return bz.NGetChangeAnim(bA);});};A.HasEnterAnim=function(by){var bz;bz=1;return(by.DynFlags&bz)===bz;};A.GetEnterAnim=function(by){return A.GetAnim(by,function(bz,bA){return bz.NGetEnterAnim(bA);});};A.HasExitAnim=function(by){var bz;bz=2;return(by.DynFlags&bz)===bz;};A.GetExitAnim=function(by){return A.GetAnim(by,function(bz,bA){return bz.NGetExitAnim(bA);});};A.Flags=function(by){return by!==null&&by.hasOwnProperty("flags")?by.flags:0;};A.Static=function(by){return new I({$:3,$0:by});};A.GetAnim=function(by,bz){return _1.Concat(o.map(function(bA){return bz(bA,by.DynElem);},by.DynNodes));};A.AppendTree=function(by,bz){var bA;return by===null?bz:bz===null?by:(bA=new I({$:2,$0:by,$1:bz}),(A.SetFlags(bA,A.Flags(by)|A.Flags(bz)),bA));};A.Sync=function(by,bz){o.iter(function(bA){bA.NSync(by);},bz.DynNodes);};A.SetFlags=function(by,bz){by.flags=bz;};B.AddClass=function(by,bz){bv(by).addClass(bz);};B.RemoveClass=function(by,bz){bv(by).removeClass(bz);};B.Doc=function(){O.$cctor();return O.Doc;};B.IterSelector=function(by,bz,bA){var bB,bC,bD;bB=by.querySelectorAll(bz);for(bC=0,bD=bB.length-1;bC<=bD;bC++)bA(bB[bC]);};B.ChildrenArray=function(by){var bz,bA,bB;bz=[];for(bA=0,bB=by.childNodes.length-1;bA<=bB;bA++)bz.push(by.childNodes[bA]);return bz;};B.CreateText=function(by){return B.Doc().createTextNode(by);};B.SetAttr=function(by,bz,bA){by.setAttribute(bz,bA);};B.InsertAt=function(by,bz,bA){var bB;if(!(bA.parentNode===by&&bz===(bB=bA.nextSibling,x.Equals(bB,null)?null:bB)))by.insertBefore(bA,bz);};B.RemoveNode=function(by,bz){if(bz.parentNode===by)by.removeChild(bz);};C=j.Doc=bu.Class({},p,C);C.Convert=function(by,bz){return C.Flatten(K.MapSeqCached(by,bz));};C.RunById=function(by,bz){var bA;bA=B.Doc().getElementById(by);x.Equals(bA,null)?m.FailWith("invalid id: "+by):C.Run(bA,bz);};C.GetOrLoadTemplate=function(by,bz,bA,bB){C.PrepareTemplate(by,bz,bA);return C.NamedTemplate(by,bz,bB);};C.PrepareTemplate=function(by,bz,bA){var bB,bC,bD,bE,bF;if(!N.LoadedTemplates().ContainsKey(C.ComposeName(by,bz))){bB=bA();for(bC=0,bD=bB.length-1;bC<=bD;bC++){bE=o.get(bB,bC);bF=bE.parentNode;x.Equals(bF,null)?void 0:bF.removeChild(bE);}C.PrepareTemplateStrict(by,bz,bB);}};C.Flatten=function(by){return C.EmbedView(K.Map(C.Concat,by));};C.Run=function(by,bz){var bA;bA=bz.docNode;N.LinkElement(by,bA);K.Sink(P.StartProcessor(N.PerformAnimatedUpdate(N.CreateRunState(by,bA),bA)),bz.updates);};C.NamedTemplate=function(by,bz,bA){var bB,bC,bD;bB=C.ComposeName(by,bz);bC=(bD=null,[N.LoadedTemplates().TryGetValue(bB,{get:function(){return bD;},set:function(bE){bD=bE;}}),bD]);return bC[0]?C.ChildrenTemplate(bC[1].cloneNode(true),bA):(bs.warn("Local template doesn't exist",bB),C.Empty());};C.ComposeName=function(by,bz){return(by+"/"+(bz==null?"":bz.$0)).toLowerCase();};C.PrepareTemplateStrict=function(by,bz,bA){var bB;function bC(bO){var bQ,bR,bS,bT,bU,bV,bW,bX;function bP(bY){var bZ;bZ=bO.getAttribute(bY);bZ===null?void 0:bO.setAttribute(bY,bZ.toLowerCase());}bQ=bO.attributes;bR=[];bS=[];bT=[];for(bU=0,bV=bQ.length-1;bU<=bV;bU++){bW=bQ.item(bU);U.StartsWith(bW.nodeName,"ws-on")&&bW.nodeName!=="ws-onafterrender"&&bW.nodeName!=="ws-on"?(bR.push(bW.nodeName),bS.push(T.string(bW.nodeName,{$:1,$0:"ws-on".length},null)+":"+bW.nodeValue.toLowerCase())):!U.StartsWith(bW.nodeName,"ws-")&&(new a.RegExp(N.TextHoleRE())).test(bW.nodeValue)?(bW.nodeValue=(bX=new a.RegExp(N.TextHoleRE(),"g"),bW.nodeValue.replace(bX,function(bY,bZ){return"${"+bZ.toLowerCase()+"}";})),bT.push(bW.nodeName)):void 0;}!(bS.length==0)?bO.setAttribute("ws-on",U.concat(" ",bS)):void 0;!(bT.length==0)?bO.setAttribute("ws-attr-holes",U.concat(" ",bT)):void 0;bP("ws-hole");bP("ws-replace");bP("ws-attr");bP("ws-onafterrender");bP("ws-var");o.iter(function(bY){bO.removeAttribute(bY);},bR);}function bD(bO){var bP,bQ,bR,bS,bT,bU;bP=null;bQ=0;bS=bO.textContent;bT=new a.RegExp(N.TextHoleRE(),"g");while(bP=bT.exec(bS),bP!==null){bO.parentNode.insertBefore(a.document.createTextNode(T.string(bS,{$:1,$0:bQ},{$:1,$0:bT.lastIndex-o.get(bP,0).length-1})),bO);bQ=bT.lastIndex;bU=a.document.createElement("span");bU.setAttribute("ws-replace",o.get(bP,1).toLowerCase());bO.parentNode.insertBefore(bU,bO);}bT.lastIndex=0;bO.textContent=T.string(bS,{$:1,$0:bQ},null);}function bE(bO,bP){function bQ(bR){B.IterSelector(bO,"["+bR+"]",function(bS){var bT,bU;bT=(bU=null,[bP.TryGetValue(bS.getAttribute(bR).toLowerCase(),{get:function(){return bU;},set:function(bV){bU=bV;}}),bU]);bT[0]?bS.setAttribute(bR,bT[1]):void 0;});}bQ("ws-hole");bQ("ws-replace");bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");B.IterSelector(bO,"[ws-on]",function(bR){bR.setAttribute("ws-on",U.concat(" ",o.map(function(bS){var bT,bU,bV;bT=U.SplitChars(bS,[":"],1);bU=(bV=null,[bP.TryGetValue(o.get(bT,1),{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);return bU[0]?o.get(bT,0)+":"+bU[1]:bS;},U.SplitChars(bR.getAttribute("ws-on"),[" "],1))));});return B.IterSelector(bO,"[ws-attr-holes]",function(bR){var bS,bT,bU;bS=U.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++)(function(){var bV;function bW(bX,bY){var bZ;bZ=m.KeyValue(bY);return bX.replace(new a.RegExp("\\${"+bZ[0]+"}","ig"),"${"+bZ[1]+"}");}bV=o.get(bS,bT);return bR.setAttribute(bV,(((bu.Curried3(w.fold))(bW))(bR.getAttribute(bV)))(bP));}());});}function bF(bO,bP){var bQ,bR,bS,bT,bU;bC(bP);bQ=bP.nodeName.toLowerCase();bR=bO.querySelector("[ws-attr="+bQ+"]");if(x.Equals(bR,null))return bs.warn("Filling non-existent attr hole",bQ);else{bR.removeAttribute("ws-attr");for(bS=0,bT=bP.attributes.length-1;bS<=bT;bS++){bU=bP.attributes.item(bS);bU.name==="class"&&bR.hasAttribute("class")?bR.setAttribute("class",bR.getAttribute("class")+" "+bU.nodeValue):bR.setAttribute(bU.name,bU.nodeValue);}return;}}function bG(bO,bP){function bQ(bR){B.IterSelector(bO,"["+bR+"]",function(bS){if(!bP.Contains(bS.getAttribute(bR)))bS.removeAttribute(bR);});}bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");B.IterSelector(bO,"[ws-hole]",function(bR){if(!bP.Contains(bR.getAttribute("ws-hole"))){bR.removeAttribute("ws-hole");while(bR.hasChildNodes())bR.removeChild(bR.lastChild);}});B.IterSelector(bO,"[ws-replace]",function(bR){if(!bP.Contains(bR.getAttribute("ws-replace")))bR.parentNode.removeChild(bR);});B.IterSelector(bO,"[ws-on]",function(bR){bR.setAttribute("ws-on",U.concat(" ",o.filter(function(bS){return bP.Contains(o.get(U.SplitChars(bS,[":"],1),1));},U.SplitChars(bR.getAttribute("ws-on"),[" "],1))));});return B.IterSelector(bO,"[ws-attr-holes]",function(bR){var bS,bT,bU,bV,bW;bS=U.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=o.get(bS,bT);bR.setAttribute(bV,(bW=new a.RegExp(N.TextHoleRE(),"g"),bR.getAttribute(bV).replace(bW,function(bX,bY){return bP.Contains(bY)?bX:"";})));}});}function bH(bO,bP){var bQ;bQ=bO.querySelector("[ws-replace]");return x.Equals(bQ,null)?(bs.warn("Filling non-existent text hole",bz),null):(bQ.parentNode.replaceChild(new a.Text(bP),bQ),{$:1,$0:bQ.getAttribute("ws-replace")});}function bI(bO,bP,bQ){while(true)if(bO.hasChildNodes())bQ=bP.insertBefore(bO.lastChild,bQ);else return null;}function bJ(bO,bP,bQ){var bR,bS,bT,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;function bU(cc){}while(true)switch(bO){case 0:bV=T.string(bP.nodeName,{$:1,$0:3},null).toLowerCase();bW=bV.indexOf(".")===-1?by+"/"+bV:U.Replace(bV,".","/");if(!N.LoadedTemplates().ContainsKey(bW))return bs.warn("Instantiating non-loaded template",bW);else{bX=N.LoadedTemplates().get_Item(bW);bY=bX.cloneNode(true);bZ=new Q.New$3();b0=new G.New$5();b1=bP.attributes;for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1.item(b2).name.toLowerCase();b0.set_Item(b4,(b5=b1.item(b2).nodeValue,b5===""?b4:b5.toLowerCase()));!bZ.Add(b4)?bs.warn("Hole mapped twice",b4):void 0;}for(b6=0,b7=bP.childNodes.length-1;b6<=b7;b6++){b8=bP.childNodes[b6];x.Equals(b8.nodeType,bw.ELEMENT_NODE)?!bZ.Add(b8.nodeName.toLowerCase())?bs.warn("Hole filled twice",bW):void 0:void 0;}b9=bP.childNodes.length===1&&x.Equals(bP.firstChild.nodeType,bw.TEXT_NODE);if(b9){bS=bH(bY,bP.firstChild.textContent);((function(cc){return function(cd){if(cd!=null)cc(cd.$0);};}((bT=function(cc){return function(cd){return cc.Add(cd);};}(bZ),function(cc){return bU(bT(cc));})))(bS));}bG(bY,bZ);if(!b9){for(b_=0,b$=bP.childNodes.length-1;b_<=b$;b_++){ca=bP.childNodes[b_];x.Equals(ca.nodeType,bw.ELEMENT_NODE)?ca.hasAttributes()?bF(bY,ca):bK(bY,ca):void 0;}}bE(bY,b0);(((function(cc){function cd(ce,cf){return bI(cc,ce,cf);}return function(ce){return function(cf){return cd(ce,cf);};};}(bY))(bP.parentNode))(bP));bP.parentNode.removeChild(bP);return;}break;case 1:if(bQ!==null){cb=bQ.nextSibling;if(x.Equals(bQ.nodeType,bw.TEXT_NODE))bD(bQ);else if(x.Equals(bQ.nodeType,bw.ELEMENT_NODE))bM(bQ);bQ=cb;}else return null;break;}}function bK(bO,bP){var bQ,bS,bT;function bR(bU,bV){var bW,bX,bY;if(bS==="title"&&bP.hasChildNodes()){bW=bv.parseHTML(bP.textContent);bP.removeChild(bP.firstChild);for(bX=0,bY=bW.length-1;bX<=bY;bX++)bP.appendChild(o.get(bW,bX));}else null;bM(bP);return bI(bP,bU,bV);}bS=bP.nodeName.toLowerCase();B.IterSelector(bO,"[ws-attr-holes]",function(bU){var bV,bW,bX,bY,bZ;bV=U.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=o.get(bV,bW);bU.setAttribute(bY,(bZ=new a.RegExp("\\${"+bS+"}","ig"),bU.getAttribute(bY).replace(bZ,bP.textContent)));}});bT=bO.querySelector("[ws-hole="+bS+"]");if(x.Equals(bT,null)){bQ=bO.querySelector("[ws-replace="+bS+"]");return x.Equals(bQ,null)?null:(bR(bQ.parentNode,bQ),void bQ.parentNode.removeChild(bQ));}else{while(bT.hasChildNodes())bT.removeChild(bT.lastChild);bT.removeAttribute("ws-hole");return bR(bT,null);}}function bL(bO){return bJ(0,bO);}function bM(bO){var bP,bQ;if(U.StartsWith(bO.nodeName.toLowerCase(),"ws-")&&!bO.hasAttribute("ws-template"))bL(bO);else{bC(bO);bP=bO.getAttribute("ws-template");if(bP===null){bQ=bO.getAttribute("ws-children-template");if(bQ===null)bN(bO,bO.firstChild);else{bO.removeAttribute("ws-children-template");C.PrepareTemplate(by,{$:1,$0:bQ},function(){return B.ChildrenArray(bO);});while(bO.hasChildNodes())bO.removeChild(bO.lastChild);}}else C.PrepareSingleTemplate(by,{$:1,$0:bP},bO);}}function bN(bO,bP){return bJ(1,bO,bP);}bB=C.FakeRoot(bA);N.LoadedTemplates().set_Item(C.ComposeName(by,bz),bB);o.length(bA)>0?bN(bB,o.get(bA,0)):void 0;};C.Concat=function(by){var bz;bz=W.ofSeqNonCopying(by);return W.TreeReduce(C.Empty(),C.Append,bz);};C.EmbedView=function(by){var bz;bz=N.CreateEmbedNode();return C.Mk({$:2,$0:bz},K.Map(a.ignore,K.Bind(function(bA){N.UpdateEmbedNode(bz,bA.docNode);return bA.updates;},by)));};C.ChildrenTemplate=function(by,bz){var bA,bB,bC,bD,bE,bH,bI,bJ,bK,bL,bM,bN;function bF(bO,bP){var bQ,bR,bS;bQ=A.Insert(bO,bP);bI.push(A.Updates(bQ));bJ.push([bO,bQ]);bR=bu.GetOptional(bQ.OnAfterRender);return bR==null?null:(bS=bR.$0,void bK.push(function(){bS(bO);}));}function bG(bO){var bP,bQ;bP=(bQ=null,[bL.TryGetValue(bO,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);return bP[0]?bP[1].$==0?{$:1,$0:bP[1].$1}:bP[1].$==1?{$:1,$0:C.TextNode(bP[1].$1)}:bP[1].$==2?{$:1,$0:C.TextView(bP[1].$1)}:bP[1].$==6?{$:1,$0:C.TextView(bP[1].$1.RView())}:bP[1].$==7?{$:1,$0:C.TextView(K.Map(a.String,bP[1].$1.RView()))}:bP[1].$==8?{$:1,$0:C.TextView(K.Map(function(bR){return bR.get_Input();},bP[1].$1.RView()))}:bP[1].$==9?{$:1,$0:C.TextView(K.Map(a.String,bP[1].$1.RView()))}:bP[1].$==10?{$:1,$0:C.TextView(K.Map(function(bR){return bR.get_Input();},bP[1].$1.RView()))}:bP[1].$==11?{$:1,$0:C.TextView(K.Map(a.String,bP[1].$1.RView()))}:(bs.warn("Content hole filled with attribute data",bO),null):null;}bH=[];bI=[];bJ=[];bK=[];bL=new G.New$5();bM=M.Get(bz);try{while(bM.MoveNext()){bN=bM.Current();bL.set_Item(bN.$0,bN);}}finally{if("Dispose"in bM)bM.Dispose();}bA=B.ChildrenArray(by);B.IterSelector(by,"[ws-hole]",function(bO){var bP,bQ,bR;bR=bO.getAttribute("ws-hole");bO.removeAttribute("ws-hole");while(bO.hasChildNodes())bO.removeChild(bO.lastChild);bP=bG(bR);bP!=null&&bP.$==1?(bQ=bP.$0,N.LinkElement(bO,bQ.docNode),bH.push(V.New(A.Empty(bO),bQ.docNode,null,bO,u.Int(),null)),bI.push(bQ.updates)):void 0;});B.IterSelector(by,"[ws-replace]",function(bO){var bP,bQ,bR,bS,bT,bU;bP=bG(bO.getAttribute("ws-replace"));bP!=null&&bP.$==1?(bQ=bP.$0,bR=bO.parentNode,bS=a.document.createTextNode(""),bR.replaceChild(bS,bO),bT=N.InsertBeforeDelim(bS,bQ.docNode),bU=o.tryFindIndex(function(bV){return bO===bV;},bA),bU==null?void 0:o.set(bA,bU.$0,bQ.docNode),bH.push(V.New(A.Empty(bR),bQ.docNode,{$:1,$0:[bT,bS]},bR,u.Int(),null)),bI.push(bQ.updates)):void 0;});B.IterSelector(by,"[ws-attr]",function(bO){var bP,bQ,bR;bP=bO.getAttribute("ws-attr");bO.removeAttribute("ws-attr");bQ=(bR=null,[bL.TryGetValue(bP,{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?bQ[1].$==3?bF(bO,bQ[1].$1):bs.warn("Attribute hole filled with non-attribute data",bP):void 0;});B.IterSelector(by,"[ws-on]",function(bO){bF(bO,I.Concat(o.choose(function(bP){var bQ,bR,bS;bQ=U.SplitChars(bP,[":"],1);bR=(bS=null,[bL.TryGetValue(o.get(bQ,1),{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);return bR[0]?bR[1].$==4?{$:1,$0:q.Handler(o.get(bQ,0),bR[1].$1)}:(bs.warn("Event hole on"+o.get(bQ,0)+" filled with non-event data",o.get(bQ,1)),null):null;},U.SplitChars(bO.getAttribute("ws-on"),[" "],1))));bO.removeAttribute("ws-on");});B.IterSelector(by,"[ws-onafterrender]",function(bO){var bP,bQ,bR;bP=bO.getAttribute("ws-onafterrender");bQ=(bR=null,[bL.TryGetValue(bP,{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?bQ[1].$==5?(bO.removeAttribute("ws-onafterrender"),bF(bO,q.OnAfterRender(bQ[1].$1))):bs.warn("onafterrender hole filled with non-onafterrender data",bP):void 0;});B.IterSelector(by,"[ws-var]",function(bO){var bP,bQ,bR;bP=bO.getAttribute("ws-var");bO.removeAttribute("ws-var");bQ=(bR=null,[bL.TryGetValue(bP,{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?bQ[1].$==6?bF(bO,q.Value(bQ[1].$1)):bQ[1].$==7?bF(bO,q.Checked(bQ[1].$1)):bQ[1].$==8?bF(bO,q.IntValue(bQ[1].$1)):bQ[1].$==9?bF(bO,q.IntValueUnchecked(bQ[1].$1)):bQ[1].$==10?bF(bO,q.FloatValue(bQ[1].$1)):bQ[1].$==11?bF(bO,q.FloatValueUnchecked(bQ[1].$1)):bs.warn("Var hole filled with non-Var data",bP):void 0;});B.IterSelector(by,"[ws-attr-holes]",function(bO){var bP,bQ,bR,bS;bP=new a.RegExp(N.TextHoleRE(),"g");bQ=U.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);bO.removeAttribute("ws-attr-holes");for(bR=0,bS=bQ.length-1;bR<=bS;bR++)(function(){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5;b2=o.get(bQ,bR);b3=bO.getAttribute(b2);bT=null;bU=0;b4=[];while(bT=bP.exec(b3),bT!==null){b5=T.string(b3,{$:1,$0:bU},{$:1,$0:bP.lastIndex-o.get(bT,0).length-1});bU=bP.lastIndex;b4.push([b5,o.get(bT,1)]);}bW=T.string(b3,{$:1,$0:bU},null);bP.lastIndex=0;bX=o.foldBack(function(b6,b7){return(function(b8){var b9,b_;b9=b8[0];b_=b8[1];return function(b$){var ca,cb,cc,cd,ce;ca=b$[0];cb=b$[1];cc=(cd=(ce=null,[bL.TryGetValue(b_,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]),cd[0]?cd[1].$==1?{$:0,$0:cd[1].$1}:cd[1].$==2?{$:1,$0:cd[1].$1}:cd[1].$==6?{$:1,$0:cd[1].$1.RView()}:cd[1].$==7?{$:1,$0:K.Map(a.String,cd[1].$1.RView())}:cd[1].$==8?{$:1,$0:K.Map(function(cf){return cf.get_Input();},cd[1].$1.RView())}:cd[1].$==9?{$:1,$0:K.Map(a.String,cd[1].$1.RView())}:cd[1].$==10?{$:1,$0:K.Map(function(cf){return cf.get_Input();},cd[1].$1.RView())}:cd[1].$==11?{$:1,$0:K.Map(a.String,cd[1].$1.RView())}:(bs.warn("Attribute value hole filled with non-text data",b_),{$:0,$0:""}):{$:0,$0:""});return cc.$==1?[b9,new n({$:1,$0:ca===""?cc.$0:K.Map(function(cf){return cf+ca;},cc.$0),$1:cb})]:[b9+cc.$0+ca,cb];};}(b6))(b7);},b4,[bW,n.Empty]);return bF(bO,bX[1].$==1?bX[1].$1.$==1?bX[1].$1.$1.$==1?bX[1].$1.$1.$1.$==0?(bY=bX[0],q.Dynamic(b2,K.Map3(function(b6,b7,b8){return bY+b6+b7+b8;},bX[1].$0,bX[1].$1.$0,bX[1].$1.$1.$0))):(bZ=bX[0],q.Dynamic(b2,K.Map(function(b6){return bZ+U.concat("",b6);},K.Sequence(bX[1])))):(b0=bX[0],q.Dynamic(b2,K.Map2(function(b6,b7){return b0+b6+b7;},bX[1].$0,bX[1].$1.$0))):bX[0]===""?q.Dynamic(b2,bX[1].$0):(b1=bX[0],q.Dynamic(b2,K.Map(function(b6){return b1+b6;},bX[1].$0))):I.Create(b2,bX[0]));}());});bB=bu.DeleteEmptyFields({Els:bA,Dirty:true,Holes:bH,Attrs:bJ,Render:(bC=bK.length==0?null:{$:1,$0:function(bO){o.iter(function(bP){bP(bO);},bK);}},bC?bC.$0:void 0)},["Render"]);bD=W.TreeReduce(K.Const(),K.Map2Unit,bI);return bA&&o.length(bA)===1&&(o.get(bA,0)instanceof bw&&(x.Equals(o.get(bA,0).nodeType,bw.ELEMENT_NODE)&&(bE=o.get(bA,0),true)))?_4.TreeNode(bB,bD):C.Mk({$:6,$0:bB},bD);};C.Empty=function(){return C.Mk(null,K.Const());};C.PrepareSingleTemplate=function(by,bz,bA){var bB,bC,bD;bA.removeAttribute("ws-template");bB=bA.getAttribute("ws-replace");bB===null?void 0:(bA.removeAttribute("ws-replace"),bC=bA.parentNode,x.Equals(bC,null)?void 0:(bD=a.document.createElement(bA.tagName),bD.setAttribute("ws-replace",bB),bC.replaceChild(bD,bA)));C.PrepareTemplateStrict(by,bz,[bA]);};C.FakeRoot=function(by){var bz,bA,bB;bz=a.document.createElement("div");for(bA=0,bB=by.length-1;bA<=bB;bA++)bz.appendChild(o.get(by,bA));return bz;};C.Append=function(by,bz){return C.Mk({$:0,$0:by.docNode,$1:bz.docNode},K.Map2Unit(by.updates,bz.updates));};C.Mk=function(by,bz){return new C.New(by,bz);};C.TextNode=function(by){return C.Mk({$:5,$0:B.CreateText(by)},K.Const());};C.TextView=function(by){var bz;bz=N.CreateTextNode();return C.Mk({$:4,$0:bz},K.Map(function(bA){N.UpdateTextNode(bz,bA);},by));};C.New=bu.Ctor(function(by,bz){this.docNode=by;this.updates=bz;},C);o.ofSeq=function(by){var bz,bA;if(by instanceof a.Array)return by.slice();else if(by instanceof n)return o.ofList(by);else{bz=[];bA=M.Get(by);try{while(bA.MoveNext())bz.push(bA.Current());return bz;}finally{if("Dispose"in bA)bA.Dispose();}}};o.tryFindIndex=function(by,bz){var bA,bB;bA=null;bB=0;while(bB<bz.length&&bA==null){by(bz[bB])?bA={$:1,$0:bB}:void 0;bB=bB+1;}return bA;};o.ofList=function(by){var bz,bA;bA=[];bz=by;while(!(bz.$==0)){bA.push(h.head(bz));bz=h.tail(bz);}return bA;};o.tryPick=function(by,bz){var bA,bB,bC;bA=null;bB=0;while(bB<bz.length&&bA==null){bC=by(bz[bB]);bC!=null&&bC.$==1?bA=bC:void 0;bB=bB+1;}return bA;};o.filter=function(by,bz){var bA,bB,bC;bA=[];for(bB=0,bC=bz.length-1;bB<=bC;bB++)if(by(bz[bB]))bA.push(bz[bB]);return bA;};o.exists=function(by,bz){var bA,bB,bC,bD;bA=false;bB=0;bD=o.length(bz);while(!bA&&bB<bD)if(by(bz[bB]))bA=true;else bB=bB+1;return bA;};o.iter=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)by(bz[bA]);};o.map=function(by,bz){var bA,bB,bC;bA=new a.Array(bz.length);for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[bB]=by(bz[bB]);return bA;};o.choose=function(by,bz){var bA,bB,bC,bD;bA=[];for(bB=0,bC=bz.length-1;bB<=bC;bB++){bD=by(bz[bB]);bD==null?void 0:bA.push(bD.$0);}return bA;};o.foldBack=function(by,bz,bA){var bB,bC,bD,bE,bF;bB=bA;bD=bz.length;for(bE=1,bF=bD;bE<=bF;bE++)bB=by(bz[bD-bE],bB);return bB;};o.pick=function(by,bz){var bA;bA=o.tryPick(by,bz);return bA==null?m.FailWith("KeyNotFoundException"):bA.$0;};o.forall=function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=o.length(bz);while(bA&&bB<bD)if(by(bz[bB]))bB=bB+1;else bA=false;return bA;};o.create=function(by,bz){var bA,bB,bC;bA=new a.Array(by);for(bB=0,bC=by-1;bB<=bC;bB++)bA[bB]=bz;return bA;};o.concat=function(by){return a.Array.prototype.concat.apply([],o.ofSeq(by));};o.init=function(by,bz){var bA,bB,bC;by<0?m.FailWith("Negative size given."):null;bA=new a.Array(by);for(bB=0,bC=by-1;bB<=bC;bB++)bA[bB]=bz(bB);return bA;};s.Obsolete=function(by){var bz,bA,bB,bC,bD;bA=by.s;if(bA==null||(bA!=null&&bA.$==2?(bz=bA.$1,false):bA!=null&&bA.$==3?(bz=bA.$1,false):true))void 0;else{by.s=null;for(bB=0,bC=o.length(bz)-1;bB<=bC;bB++){bD=o.get(bz,bB);typeof bD=="object"?function(bE){s.Obsolete(bE);}(bD):bD();}}};s.New=function(by){return{s:by};};D.TryParseInt32=function(by,bz){return D.TryParse(by,-2147483648,2147483647,bz);};E=v.ArrayStorage=bu.Class({SRemoveIf:function(by,bz){return o.filter(function(bA){return!by(bA);},bz);},SSetAt:function(by,bz,bA){o.set(bA,by,bz);return bA;},SAppend:function(by,bz){bz.push(by);return bz;},SInit:function(){return this.init;}},p,E);E.New=bu.Ctor(function(by){this.init=by;},E);G=F.Dictionary=bu.Class({TryGetValue:function(by,bz){var bA,bB,bC;bA=this;bB=this.data[this.hash(by)];return bB&&(bC=o.tryPick(function(bD){var bE;bE=m.KeyValue(bD);return bA.equals.apply(null,[bE[0],by])?{$:1,$0:bE[1]}:null;},bB),bC!=null&&bC.$==1&&(bz.set(bC.$0),true));},Remove:function(by){return this.remove(by);},remove:function(by){var bz,bA,bB,bC;bz=this;bA=this.hash(by);bB=this.data[bA];return bB&&(bC=o.filter(function(bD){return!bz.equals.apply(null,[(m.KeyValue(bD))[0],by]);},bB),o.length(bC)<bB.length&&(this.count=this.count-1,this.data[bA]=bC,true));},ContainsKey:function(by){var bz,bA;bz=this;bA=this.data[this.hash(by)];return bA&&o.exists(function(bB){return bz.equals.apply(null,[(m.KeyValue(bB))[0],by]);},bA);},get_Item:function(by){return this.get(by);},set_Item:function(by,bz){this.set(by,bz);},get:function(by){var bz,bA;bz=this;bA=this.data[this.hash(by)];return bA?o.pick(function(bB){var bC;bC=m.KeyValue(bB);return bz.equals.apply(null,[bC[0],by])?{$:1,$0:bC[1]}:null;},bA):_2.notPresent();},set:function(by,bz){var bA,bB,bC,bD;bA=this;bB=this.hash(by);bC=this.data[bB];bC?(bD=o.tryFindIndex(function(bE){return bA.equals.apply(null,[(m.KeyValue(bE))[0],by]);},bC),bD==null?(this.count=this.count+1,bC.push({K:by,V:bz})):bC[bD.$0]={K:by,V:bz}):(this.count=this.count+1,this.data[bB]=new a.Array({K:by,V:bz}));},GetEnumerator:function(){return M.Get0(this);},GetEnumerator0:function(){return M.Get0(o.concat(H.GetFieldValues(this.data)));}},p,G);G.New$5=bu.Ctor(function(){G.New$6.call(this,[],x.Equals,x.Hash);},G);G.New$6=bu.Ctor(function(by,bz,bA){var bB,bC;this.equals=bz;this.hash=bA;this.count=0;this.data=[];bB=M.Get(by);try{while(bB.MoveNext()){bC=bB.Current();this.set(bC.K,bC.V);}}finally{if("Dispose"in bB)bB.Dispose();}},G);H.GetFieldValues=function(by){var bz,bA;bz=[];for(var bB in by)bz.push(by[bB]);return bz;};I=j.AttrProxy=bu.Class({},null,I);I.Concat=function(by){var bz;bz=W.ofSeqNonCopying(by);return W.TreeReduce(A.EmptyAttr(),I.Append,bz);};I.Create=function(by,bz){return A.Static(function(bA){B.SetAttr(bA,by,bz);});};I.Append=function(by,bz){return A.AppendTree(by,bz);};J=j.DynamicAttrNode=bu.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(by){return _1.get_Empty();},NGetEnterAnim:function(by){return _1.get_Empty();},NGetExitAnim:function(by){return _1.get_Empty();},NSync:function(by){if(this.dirty){(this.push(by))(this.value);this.dirty=false;}}},p,J);J.New=bu.Ctor(function(by,bz){var bA;bA=this;this.push=bz;this.value=void 0;this.dirty=false;this.updates=K.Map(function(bB){bA.value=bB;bA.dirty=true;},by);},J);K.MapSeqCached=function(by,bz){return K.MapSeqCachedBy(a.id,by,bz);};K.Map=function(by,bz){return K.CreateLazy(function(){return s.Map(by,bz());});};K.MapSeqCachedBy=function(by,bz,bA){var bB;bB=[new G.New$5()];return K.Map(function(bC){var bD,bE,bF;bD=bB[0];bE=new G.New$5();bF=W.mapInPlace(function(bG){var bH,bI;bH=by(bG);bI=bD.ContainsKey(bH)?bD.get_Item(bH):bz(bG);bE.set_Item(bH,bI);return bI;},o.ofSeq(bC));bB[0]=bE;return bF;},bA);};K.Sink=function(by,bz){function bA(){s.WhenRun(bz(),by,function(){_7.scheduler().Fork(bA);});}_7.scheduler().Fork(bA);};K.CreateLazy=function(by){var bz;bz={c:null,o:by};return function(){var bA,bB;bA=bz.c;return bA===null?(bA=bz.o(),bz.c=bA,(bB=bA.s,bB!=null&&bB.$==0)&&true?bz.o=null:s.WhenObsoleteRun(bA,function(){bz.c=null;}),bA):bA;};};K.Bind=function(by,bz){return K.Join(K.Map(by,bz));};K.Map3=function(by,bz,bA,bB){return K.CreateLazy(function(){return s.Map3(by,bz(),bA(),bB());});};K.Sequence=function(by){return K.CreateLazy(function(){return s.Sequence(w.map(function(bz){return bz();},by));});};K.Map2=function(by,bz,bA){return K.CreateLazy(function(){return s.Map2(by,bz(),bA());});};K.Const=function(by){var bz;bz=s.New({$:0,$0:by});return function(){return bz;};};K.Map2Unit=function(by,bz){return K.CreateLazy(function(){return s.Map2Unit(by(),bz());});};K.Join=function(by){return K.CreateLazy(function(){return s.Join(by());});};L.$cctor=function(){L.$cctor=a.ignore;L.counter=0;};M.Get=function(by){return by instanceof a.Array?M.ArrayEnumerator(by):x.Equals(typeof by,"string")?M.StringEnumerator(by):by.GetEnumerator();};M.ArrayEnumerator=function(by){return new R.New(0,null,function(bz){var bA;bA=bz.s;return bA<o.length(by)&&(bz.c=o.get(by,bA),bz.s=bA+1,true);},void 0);};M.StringEnumerator=function(by){return new R.New(0,null,function(bz){var bA;bA=bz.s;return bA<by.length&&(bz.c=by[bA],bz.s=bA+1,true);},void 0);};M.Get0=function(by){return by instanceof a.Array?M.ArrayEnumerator(by):x.Equals(typeof by,"string")?M.StringEnumerator(by):"GetEnumerator0"in by?by.GetEnumerator0():by.GetEnumerator();};N.LoadedTemplates=function(){S.$cctor();return S.LoadedTemplates;};N.LinkElement=function(by,bz){N.InsertDoc(by,bz,null);};N.CreateRunState=function(by,bz){return Z.New(_0.get_Empty(),N.CreateElemNode(by,A.EmptyAttr(),bz));};N.PerformAnimatedUpdate=function(by,bz){var bA;return _1.get_UseAnimations()?(bA=null,_7.Delay(function(){var bB,bC,bD;bB=_0.FindAll(bz);bC=N.ComputeChangeAnim(by,bB);bD=N.ComputeEnterAnim(by,bB);return _7.Bind(_1.Play(_1.Append(bC,N.ComputeExitAnim(by,bB))),function(){return _7.Bind(N.SyncElemNodesNextFrame(by),function(){return _7.Bind(_1.Play(bD),function(){by.PreviousNodes=bB;return _7.Return(null);});});});})):N.SyncElemNodesNextFrame(by);};N.TextHoleRE=function(){S.$cctor();return S.TextHoleRE;};N.CreateEmbedNode=function(){return{Current:null,Dirty:false};};N.UpdateEmbedNode=function(by,bz){by.Current=bz;by.Dirty=true;};N.InsertDoc=function(by,bz,bA){var bB;return bz!=null&&bz.$==1?N.InsertNode(by,bz.$0.El,bA):bz!=null&&bz.$==2?(bB=bz.$0,(bB.Dirty=false,N.InsertDoc(by,bB.Current,bA))):bz==null?bA:bz!=null&&bz.$==4?N.InsertNode(by,bz.$0.Text,bA):bz!=null&&bz.$==5?N.InsertNode(by,bz.$0,bA):bz!=null&&bz.$==6?o.foldBack(function(bC,bD){return bC.constructor===a.Object?N.InsertDoc(by,bC,bD):N.InsertNode(by,bC,bD);},bz.$0.Els,bA):N.InsertDoc(by,bz.$0,N.InsertDoc(by,bz.$1,bA));};N.CreateElemNode=function(by,bz,bA){var bB;N.LinkElement(by,bA);bB=A.Insert(by,bz);return V.New(bB,bA,null,by,u.Int(),bu.GetOptional(bB.OnAfterRender));};N.ComputeChangeAnim=function(by,bz){var bA;function bB(bC){return A.HasChangeAnim(bC.Attr);}bA=function(bC){return _0.Filter(bB,bC);};return _1.Concat(o.map(function(bC){return A.GetChangeAnim(bC.Attr);},_0.ToArray(_0.Intersect(bA(by.PreviousNodes),bA(bz)))));};N.ComputeEnterAnim=function(by,bz){return _1.Concat(o.map(function(bA){return A.GetEnterAnim(bA.Attr);},_0.ToArray(_0.Except(by.PreviousNodes,_0.Filter(function(bA){return A.HasEnterAnim(bA.Attr);},bz)))));};N.ComputeExitAnim=function(by,bz){return _1.Concat(o.map(function(bA){return A.GetExitAnim(bA.Attr);},_0.ToArray(_0.Except(bz,_0.Filter(function(bA){return A.HasExitAnim(bA.Attr);},by.PreviousNodes)))));};N.SyncElemNodesNextFrame=function(by){function bz(bA){a.requestAnimationFrame(function(){N.SyncElemNode(by.Top);bA();});}return _7.FromContinuations(function(bA,bB,bC){return bz.apply(null,[bA,bB,bC]);});};N.InsertBeforeDelim=function(by,bz){var bA,bB;bA=by.parentNode;bB=a.document.createTextNode("");bA.insertBefore(bB,by);N.LinkPrevElement(by,bz);return bB;};N.InsertNode=function(by,bz,bA){B.InsertAt(by,bA,bz);return bz;};N.SyncElemNode=function(by){N.SyncElement(by);N.Sync(by.Children);N.AfterRender(by);};N.CreateTextNode=function(){return{Text:B.CreateText(""),Dirty:false,Value:""};};N.UpdateTextNode=function(by,bz){by.Value=bz;by.Dirty=true;};N.LinkPrevElement=function(by,bz){N.InsertDoc(by.parentNode,bz,by);};N.SyncElement=function(by){function bz(bA){function bB(bC){var bD,bE;return bC!=null&&bC.$==0?bB(bC.$0)||bB(bC.$1):bC!=null&&bC.$==2?(bD=bC.$0,bD.Dirty||bB(bD.Current)):bC!=null&&bC.$==6&&(bE=bC.$0,bE.Dirty||o.exists(bz,bE.Holes));}return bB(bA.Children);}A.Sync(by.El,by.Attr);bz(by)?N.DoSyncElement(by):void 0;};N.Sync=function(by){var bz,bA;if(by!=null&&by.$==1)N.SyncElemNode(by.$0);else if(by!=null&&by.$==2)N.Sync(by.$0.Current);else if(by==null);else if(by!=null&&by.$==5);else if(by!=null&&by.$==4){bz=by.$0;bz.Dirty?(bz.Text.nodeValue=bz.Value,bz.Dirty=false):void 0;}else if(by!=null&&by.$==6){bA=by.$0;o.iter(function(bB){N.SyncElemNode(bB);},bA.Holes);o.iter(function(bB){A.Sync(bB[0],bB[1]);},bA.Attrs);N.AfterRender(bA);}else{N.Sync(by.$0);N.Sync(by.$1);}};N.AfterRender=function(by){var bz;bz=bu.GetOptional(by.Render);bz!=null&&bz.$==1?(bz.$0(by.El),bu.SetOptional(by,"Render",null)):void 0;};N.DoSyncElement=function(by){var bz,bA,bB;function bC(bD,bE){var bF,bG;return bD!=null&&bD.$==1?bD.$0.El:bD!=null&&bD.$==2?(bF=bD.$0,bF.Dirty?(bF.Dirty=false,N.InsertDoc(bz,bF.Current,bE)):bC(bF.Current,bE)):bD==null?bE:bD!=null&&bD.$==4?bD.$0.Text:bD!=null&&bD.$==5?bD.$0:bD!=null&&bD.$==6?(bG=bD.$0,(bG.Dirty?bG.Dirty=false:void 0,o.foldBack(function(bH,bI){return bH.constructor===a.Object?bC(bH,bI):bH;},bG.Els,bE))):bC(bD.$0,bC(bD.$1,bE));}bz=by.El;bp.Iter((bA=by.El,function(bD){B.RemoveNode(bA,bD);}),bp.Except(bp.DocChildren(by),bp.Children(by.El,bu.GetOptional(by.Delimiters))));bC(by.Children,(bB=bu.GetOptional(by.Delimiters),bB!=null&&bB.$==1?bB.$0[1]:null));};O.$cctor=function(){O.$cctor=a.ignore;O.Doc=a.document;};P.StartProcessor=function(by){var bz;function bA(){var bB;bB=null;return _7.Delay(function(){return _7.Bind(by,function(){var bC;bC=bz[0];return bC===1?(bz[0]=0,_7.Zero()):bC===2?(bz[0]=1,bA()):_7.Zero();});});}bz=[0];return function(){var bB;bB=bz[0];bB===0?(bz[0]=1,_7.Start(bA(),null)):bB===1?bz[0]=2:void 0;};};Q=F.HashSet=bu.Class({Add:function(by){return this.add(by);},Contains:function(by){var bz;bz=this.data[this.hash(by)];return bz==null?false:this.arrContains(by,bz);},add:function(by){var bz,bA;bz=this.hash(by);bA=this.data[bz];return bA==null?(this.data[bz]=[by],this.count=this.count+1,true):this.arrContains(by,bA)?false:(bA.push(by),this.count=this.count+1,true);},arrContains:function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=bz.length;while(bA&&bB<bD)if(this.equals.apply(null,[bz[bB],by]))bA=false;else bB=bB+1;return!bA;},IntersectWith:function(by){var bz,bA,bB,bC,bD;bz=new Q.New$4(by,this.equals,this.hash);bA=bk.concat(this.data);for(bB=0,bC=bA.length-1;bB<=bC;bB++){bD=bA[bB];!bz.Contains(bD)?this.Remove(bD):void 0;}},get_Count:function(){return this.count;},CopyTo:function(by){var bz,bA,bB,bC;bz=0;bA=bk.concat(this.data);for(bB=0,bC=bA.length-1;bB<=bC;bB++)o.set(by,bB,bA[bB]);},ExceptWith:function(by){var bz;bz=M.Get(by);try{while(bz.MoveNext())this.Remove(bz.Current());}finally{if("Dispose"in bz)bz.Dispose();}},Remove:function(by){var bz;bz=this.data[this.hash(by)];return bz==null?false:this.arrRemove(by,bz)&&(this.count=this.count-1,true);},arrRemove:function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=bz.length;while(bA&&bB<bD)if(this.equals.apply(null,[bz[bB],by])){bz.splice.apply(bz,[bB,1]);bA=false;}else bB=bB+1;return!bA;},GetEnumerator:function(){return M.Get(bk.concat(this.data));},GetEnumerator0:function(){return M.Get(bk.concat(this.data));}},p,Q);Q.New$3=bu.Ctor(function(){Q.New$4.call(this,[],x.Equals,x.Hash);},Q);Q.New$4=bu.Ctor(function(by,bz,bA){var bB;this.equals=bz;this.hash=bA;this.data=[];this.count=0;bB=M.Get(by);try{while(bB.MoveNext())this.add(bB.Current());}finally{if("Dispose"in bB)bB.Dispose();}},Q);Q.New$2=bu.Ctor(function(by){Q.New$4.call(this,by,x.Equals,x.Hash);},Q);R=M.T=bu.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},p,R);R.New=bu.Ctor(function(by,bz,bA,bB){this.s=by;this.c=bz;this.n=bA;this.d=bB;},R);S.$cctor=function(){S.$cctor=a.ignore;S.LoadedTemplates=new G.New$5();S.TextHoleRE="\\${([^}]+)}";};T.string=function(by,bz,bA){return bz==null?bA!=null&&bA.$==1?by.slice(0,bA.$0+1):"":bA==null?by.slice(bz.$0):by.slice(bz.$0,bA.$0+1);};U.concat=function(by,bz){return o.ofSeq(bz).join(by);};U.StartsWith=function(by,bz){return by.substring(0,bz.length)==bz;};U.SplitChars=function(by,bz,bA){return U.Split(by,new a.RegExp("["+U.RegexEscape(bz.join(""))+"]"),bA);};U.Replace=function(by,bz,bA){function bB(bC){var bD,bE,bF;bD=bC.indexOf(bz);return bD!==-1?(bE=U.ReplaceOnce(bC,bz,bA),(bF=bD+bA.length,U.Substring(bE,0,bD+bA.length)+bB(bE.substring(bF)))):bC;}return bB(by);};U.RegexEscape=function(by){return by.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};U.Split=function(by,bz,bA){return bA===1?o.filter(function(bB){return bB!=="";},U.SplitWith(by,bz)):U.SplitWith(by,bz);};U.ReplaceOnce=function(by,bz,bA){return by.replace(bz,bA);};U.forall=function(by,bz){return w.forall(by,U.protect(bz));};U.SplitWith=function(by,bz){return by.split(bz);};U.Substring=function(by,bz,bA){return by.substr(bz,bA);};U.protect=function(by){return by===null?"":by;};V=j.DocElemNode=bu.Class({Equals:function(by){return this.ElKey===by.ElKey;},GetHashCode:function(){return this.ElKey;}},null,V);V.New=function(by,bz,bA,bB,bC,bD){var bE;return new V((bE={Attr:by,Children:bz,El:bB,ElKey:bC},(bu.SetOptional(bE,"Delimiters",bA),bu.SetOptional(bE,"Render",bD),bE)));};W.mapInPlace=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)bz[bA]=by(bz[bA]);return bz;};W.ofSeqNonCopying=function(by){var bz,bA;if(by instanceof a.Array)return by;else if(by instanceof n)return o.ofList(by);else if(by===null)return[];else{bz=[];bA=M.Get(by);try{while(bA.MoveNext())bz.push(bA.Current());return bz;}finally{if("Dispose"in bA)bA.Dispose();}}};W.TreeReduce=function(by,bz,bA){var bB;function bC(bD,bE){var bF,bG;return bE<=0?by:bE===1&&(bD>=0&&bD<bB&&true)?o.get(bA,bD):(bG=bE/2>>0,bz(bC(bD,bG),bC(bD+bG,bE-bG)));}bB=o.length(bA);return bC(0,bB);};W.MapTreeReduce=function(by,bz,bA,bB){var bC;function bD(bE,bF){var bG,bH;return bF<=0?bz:bF===1&&(bE>=0&&bE<bC&&true)?by(o.get(bB,bE)):(bH=bF/2>>0,bA(bD(bE,bH),bD(bE+bH,bF-bH)));}bC=o.length(bB);return bD(0,bC);};Z.New=function(by,bz){return{PreviousNodes:by,Top:bz};};_0.get_Empty=function(){return{$:0,$0:new Q.New$3()};};_0.FindAll=function(by){var bz;function bA(bC){if(bC!=null&&bC.$==0){bA(bC.$0);bA(bC.$1);}else if(bC!=null&&bC.$==1)bB(bC.$0);else if(bC!=null&&bC.$==2)bA(bC.$0.Current);else if(bC!=null&&bC.$==6)o.iter(bB,bC.$0.Holes);}function bB(bC){bz.push(bC);bA(bC.Children);}bz=[];bA(by);return{$:0,$0:new Q.New$2(bz)};};_0.Filter=function(by,bz){return{$:0,$0:bf.Filter(by,bz.$0)};};_0.Intersect=function(by,bz){return{$:0,$0:bf.Intersect(by.$0,bz.$0)};};_0.ToArray=function(by){return bf.ToArray(by.$0);};_0.Except=function(by,bz){return{$:0,$0:bf.Except(by.$0,bz.$0)};};_1.get_UseAnimations=function(){return _8.UseAnimations();};_1.Play=function(by){var bz;bz=null;return _7.Delay(function(){return _7.Bind(_1.Run(a.ignore,_8.Actions(by)),function(){_8.Finalize(by);return _7.Return(null);});});};_1.Append=function(by,bz){return{$:0,$0:_9.Append(by.$0,bz.$0)};};_1.Concat=function(by){return{$:0,$0:_9.Concat(w.map(_8.List,by))};};_1.Run=function(by,bz){var bA;function bB(bC){function bD(bE,bF){var bG;bG=bF-bE;bz.Compute(bG);by();return bG<=bA?void a.requestAnimationFrame(function(bH){bD(bE,bH);}):bC();}a.requestAnimationFrame(function(bE){bD(bE,bE);});}bA=bz.Duration;return bA===0?_7.Zero():_7.FromContinuations(function(bC,bD,bE){return bB.apply(null,[bC,bD,bE]);});};_1.get_Empty=function(){return{$:0,$0:_9.Empty()};};_2.notPresent=function(){return m.FailWith("The given key was not present in the dictionary.");};_3=j.CheckedInput=bu.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,_3);_4=j.Elt=bu.Class({},C,_4);_4.TreeNode=function(by,bz){var bA,bB;function bC(bD){return bD[1];}bA=$.Create(bz);return new _4.New$1({$:6,$0:by},K.Map2Unit((bB=o.map(function(bD){return A.Updates(bC(bD));},by.Attrs),W.TreeReduce(K.Const(),K.Map2Unit,bB)),bA.v),o.get(by.Els,0),bA);};_4.New$1=bu.Ctor(function(by,bz,bA,bB){C.New.call(this,by,bz);this.docNode$1=by;this.updates$1=bz;this.elt=bA;this.rvUpdates=bB;},_4);_6.New=function(by,bz,bA,bB){var bC;bC={DynElem:by,DynFlags:bz,DynNodes:bA};bu.SetOptional(bC,"OnAfterRender",bB);return bC;};_7.Delay=function(by){return function(bz){try{(by(null))(bz);}catch(bA){bz.k({$:1,$0:bA});}};};_7.Bind=function(by,bz){return _7.checkCancel(function(bA){by(bb.New(function(bB){var bC;if(bB.$==0){bC=bB.$0;_7.scheduler().Fork(function(){try{(bz(bC))(bA);}catch(bD){bA.k({$:1,$0:bD});}});}else _7.scheduler().Fork(function(){bA.k(bB);});},bA.ct));});};_7.Zero=function(){bc.$cctor();return bc.Zero;};_7.Start=function(by,bz){var bA,bB;bA=(bB=(_7.defCTS())[0],bz==null?bB:bz.$0);_7.scheduler().Fork(function(){if(!bA.c)by(bb.New(function(bC){if(bC.$==1)_7.UncaughtAsyncError(bC.$0);},bA));});};_7.Return=function(by){return function(bz){bz.k({$:0,$0:by});};};_7.checkCancel=function(by){return function(bz){if(bz.ct.c)_7.cancel(bz);else by(bz);};};_7.defCTS=function(){bc.$cctor();return bc.defCTS;};_7.UncaughtAsyncError=function(by){bs.log("WebSharper: Uncaught asynchronous exception",by);};_7.FromContinuations=function(by){return function(bz){var bA;function bB(bC){if(bA[0])m.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bA[0]=true;_7.scheduler().Fork(bC);}}bA=[false];by(function(bC){bB(function(){bz.k({$:0,$0:bC});});},function(bC){bB(function(){bz.k({$:1,$0:bC});});},function(bC){bB(function(){bz.k({$:2,$0:bC});});});};};_7.cancel=function(by){by.k({$:2,$0:new bm.New(by.ct)});};_7.scheduler=function(){bc.$cctor();return bc.scheduler;};_8.UseAnimations=function(){be.$cctor();return be.UseAnimations;};_8.Actions=function(by){return _8.ConcatActions(o.choose(function(bz){return bz.$==1?{$:1,$0:bz.$0}:null;},_9.ToArray(by.$0)));};_8.Finalize=function(by){o.iter(function(bz){if(bz.$==0)bz.$0();},_9.ToArray(by.$0));};_8.List=function(by){return by.$0;};_8.ConcatActions=function(by){var bz,bA,bB,bC;bz=W.ofSeqNonCopying(by);bA=o.length(bz);return bA===0?_8.Const():bA===1?o.get(bz,0):(bB=w.max(w.map(function(bD){return bD.Duration;},bz)),(bC=o.map(function(bD){return _8.Prolong(bB,bD);},bz),_8.Def(bB,function(bD){o.iter(function(bE){bE.Compute(bD);},bC);})));};_8.Const=function(by){return _8.Def(0,function(){return by;});};_8.Prolong=function(by,bz){var bA,bB,bC;bA=bz.Compute;bB=bz.Duration;bC=bo.Create(function(){return bz.Compute(bz.Duration);});return{Compute:function(bD){return bD>=bB?bC.f():bA(bD);},Duration:by};};_8.Def=function(by,bz){return{Compute:bz,Duration:by};};_9.Append=function(by,bz){return by.$==0?bz:bz.$==0?by:{$:2,$0:by,$1:bz};};_9.Concat=function(by){var bz;bz=W.ofSeqNonCopying(by);return W.TreeReduce(_9.Empty(),_9.Append,bz);};_9.ToArray=function(by){var bz;function bA(bB){if(bB.$==1)bz.push(bB.$0);else if(bB.$==2){bA(bB.$0);bA(bB.$1);}else if(bB.$==3)o.iter(function(bC){bz.push(bC);},bB.$0);}bz=[];bA(by);return bz.slice(0);};_9.Empty=function(){bn.$cctor();return bn.Empty;};_.isBlank=function(by){return U.forall(bg.IsWhiteSpace,by);};$=j.Updates=bu.Class({},null,$);$.Create=function(by){var bz;bz=null;bz=$.New(by,null,function(){var bA;bA=bz.s;return bA===null?(bA=s.Copy(bz.c()),bz.s=bA,s.WhenObsoleteRun(bA,function(){bz.s=null;}),bA):bA;});return bz;};$.New=function(by,bz,bA){return new $({c:by,s:bz,v:bA});};ba.$cctor=function(){ba.$cctor=a.ignore;ba.EmptyAttr=null;};bb.New=function(by,bz){return{k:by,ct:bz};};bc.$cctor=function(){bc.$cctor=a.ignore;bc.noneCT=bd.New(false,[]);bc.scheduler=new bh.New();bc.defCTS=[new bi.New()];bc.Zero=_7.Return();bc.GetCT=function(by){by.k({$:0,$0:by.ct});};};bd.New=function(by,bz){return{c:by,r:bz};};be.$cctor=function(){be.$cctor=a.ignore;be.CubicInOut=bj.Custom(function(by){var bz;bz=by*by;return 3*bz-2*(bz*by);});be.UseAnimations=true;};bf.Filter=function(by,bz){return new Q.New$2(o.filter(by,bf.ToArray(bz)));};bf.Intersect=function(by,bz){var bA;bA=new Q.New$2(bf.ToArray(by));bA.IntersectWith(bf.ToArray(bz));return bA;};bf.ToArray=function(by){var bz;bz=o.create(by.get_Count(),void 0);by.CopyTo(bz);return bz;};bf.Except=function(by,bz){var bA;bA=new Q.New$2(bf.ToArray(bz));bA.ExceptWith(bf.ToArray(by));return bA;};bg.IsWhiteSpace=function(by){return by.match(new a.RegExp("\\s"))!==null;};D.TryParse=function(by,bz,bA,bB){var bC,bD;bC=+by;bD=bC===bC-bC%1&&bC>=bz&&bC<=bA;bD?bB.set(bC):void 0;return bD;};bh=_7.Scheduler=bu.Class({Fork:function(by){var bz;bz=this;this.robin.push(by);this.idle?(this.idle=false,a.setTimeout(function(){bz.tick();},0)):void 0;},tick:function(){var by,bz,bA;bz=this;bA=bx.now();by=true;while(by)if(this.robin.length===0){this.idle=true;by=false;}else{(this.robin.shift())();bx.now()-bA>40?(a.setTimeout(function(){bz.tick();},0),by=false):void 0;}}},p,bh);bh.New=bu.Ctor(function(){this.idle=true;this.robin=[];},bh);bi=g.CancellationTokenSource=bu.Class({},p,bi);bi.New=bu.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bi);bj=j.Easing=bu.Class({},p,bj);bj.Custom=function(by){return new bj.New(by);};bj.New=bu.Ctor(function(by){this.transformTime=by;},bj);bk.concat=function(by){var bz,bA;bz=[];for(var bB in by)bz.push.apply(bz,by[bB]);return bz;};bl.Clear=function(by){by.splice(0,o.length(by));};bm=g.OperationCanceledException=bu.Class({},null,bm);bm.New=bu.Ctor(function(by){bm.New$1.call(this,"The operation was canceled.",null,by);},bm);bm.New$1=bu.Ctor(function(by,bz,bA){this.message=by;this.inner=bz;this.ct=bA;},bm);bn.$cctor=function(){bn.$cctor=a.ignore;bn.Empty={$:0};};bo.Create=function(by){return br.New(false,by,bo.forceLazy);};bo.forceLazy=function(){var by;by=this.v();this.c=true;this.v=by;this.f=bo.cachedLazy;return by;};bo.cachedLazy=function(){return this.v;};bp.DocChildren=function(by){var bz;function bA(bB){if(bB!=null&&bB.$==2)bA(bB.$0.Current);else if(bB!=null&&bB.$==1)bz.push(bB.$0.El);else if(bB==null);else if(bB!=null&&bB.$==5)bz.push(bB.$0);else if(bB!=null&&bB.$==4)bz.push(bB.$0.Text);else if(bB!=null&&bB.$==6)o.iter(function(bC){if(bC.constructor===a.Object)bA(bC);else bz.push(bC);},bB.$0.Els);else{bA(bB.$0);bA(bB.$1);}}bz=[];bA(by.Children);return{$:0,$0:W.ofSeqNonCopying(bz)};};bp.Children=function(by,bz){var bA,bB,bC;if(bz!=null&&bz.$==1){bC=[];bA=bz.$0[0].nextSibling;while(bA!==bz.$0[1]){bC.push(bA);bA=bA.nextSibling;}return{$:0,$0:bC};}else return{$:0,$0:o.init(by.childNodes.length,(bB=by.childNodes,function(bD){return bB[bD];}))};};bp.Except=function(by,bz){var bA;bA=by.$0;return{$:0,$0:o.filter(function(bB){return o.forall(function(bC){return!(bB===bC);},bA);},bz.$0)};};bp.Iter=function(by,bz){o.iter(by,bz.$0);};br.New=function(by,bz,bA){return{c:by,v:bz,f:bA};};bu.OnLoad(function(){d.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
